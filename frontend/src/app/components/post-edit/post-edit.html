<div class="max-w-3xl my-10 p-6 bg-white shadow-xl rounded-sm mx-4 sm:mx-auto">
    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">
        @if (postData) {
        Editando Post: {{ postData.title }}
        } @else {
        Cargando...
        }
    </h2>

    @if (isLoading && !postData) {
    <div class="text-blue-600 font-medium text-center py-8">Cargando datos del post...</div>
    }

    @if (postData) {
    <form #f="ngForm" (ngSubmit)="updatePost()" class="space-y-6">

        <div>
            <label for="title" class="block text-sm font-medium text-gray-700">Título</label>
            <input id="title" type="text" name="title" [(ngModel)]="postData.title" required
                class="mt-1 block w-full border border-gray-300 rounded-sm shadow-sm p-3 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <div>
            <label for="category" class="block text-sm font-medium text-gray-700">Categoría</label>
            <input id="category" type="text" name="category" [(ngModel)]="postData.category" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <div>
            <label for="tags" class="block text-sm font-medium text-gray-700">Etiquetas</label>
            <input id="tags" type="text" name="tags" [(ngModel)]="postData.tags" required
                class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <div>
            <label for="content" class="block text-sm font-medium text-gray-700">Contenido</label>
            <textarea id="content" name="content" rows="6" [(ngModel)]="postData.content" required
                class="mt-1 block w-full border border-gray-300 rounded-sm shadow-sm p-3 focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>

        @if (isLoading) {
        <div class="text-blue-600 font-medium text-center">Guardando cambios...</div>
        }
        @if (successMessage) {
        <div class="p-3 bg-green-100 text-green-700 border border-green-400 rounded-md text-center">{{ successMessage }}
        </div>
        }

        <button type="submit" [disabled]="isLoading || f.invalid"
            class="w-full py-3 px-4 border border-transparent rounded-sm shadow-sm text-lg font-medium text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:bg-gray-400 cursor-pointer">
            Guardar Cambios
        </button>
    </form>
    }

    @if (postId) {
    <button type="button" [routerLink]="['/post', postId]"
        class="hover:bg-gray-600 cursor-pointer px-3 py-2 rounded-sm hover:text-white transition duration-150 mt-4">
        ← Cancelar y volver
    </button>
    }
</div>